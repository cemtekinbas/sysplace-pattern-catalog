\input{header.tex}

\newcommand{\name}{Bump To Connect}

% -------------------------------
% WAS
% -------------------------------

\newcommand{\desc}{Ein Benutzer (der \sen{}) möchte sein Gerät (das \sendev{}) durch direkten Kontakt mit einem anderen Gerät (dem \recdev{}) verbinden um eine Datenübertragung zu ermöglichen.}

\newcommand{\solution}{Der \sen\ hat das \sendev\ in der Hand. Durch das  zusammenstoßen (\glslink{bump}{Bumpen}) des \sendev s\ mit dem \recdev\ wird der Verbindungsvorgang gestartet.}

%\newcommand{\category}{give}
%\newcommand{\category}{take}
%\newcommand{\category}{exchange}
%\newcommand{\category}{extend}
\newcommand{\category}{connect}

% -------------------------------
% WIE
% -------------------------------

\newcommand{\useraction}{Der \sen\ hält das \sendev\ in der Hand und stößt es leicht an das \recdev\ an. Das \recdev\ kann dabei von einer weiteren Person gehalten werden oder stationär sein (z.B ein Tablet oder Tabletop).}

\newcommand{\reactionSen}{Auf dem \sendev\ sollte zu verschiedenen Phasen des Bumps Feedback gegeben werden. Ein Bump besteht aus den drei \glslink{atomareinteraktion}{atomaren Interaktionen} \textit{Move}, \textit{Abrupt Stop} und \textit{Bump Recognized}.\\
Da es sich bei \textbf{Bump to Connect} um eine \gls{synchronegeste} handelt, werden nach dem Bump die \glslink{accelerometer}{Accelerometerdaten} der beteiligten Geräte verglichen. Vor dem Bump besteht keine direkte Verbindung zwischen den Geräten, daher muss es eine \gls{vermittlungskomponente} geben (z.B. ein externer Server), an die die Daten zur Überprüfung gesendet werden. Sind die Daten ähnlich genug, gilt der Bump als \textit{erfolgreich}. Bei einem \textit{erfolgreich} ausgeführten Bump finden alle atomaren Interaktionen statt, nach Beendigung der letzten werden die Geräte drahtlos verbunden (Atomare Interaktion \textit{Connect}), worüber der Nutzer ebenfalls Feedback erhalten sollte.}

\newcommand{\reactionRec}{Handelt es sich bei dem \recdev\ um ein mobiles Gerät, das von einem Nutzer gehalten wird, werden die selben atomaren Interaktionen ausgeführt wie auf dem \sendev .\
}

\newcommand{\microinteractionstabular}{
\begin{figure}[H]
\begin{table}[H]
\renewcommand{\arraystretch}{2}\addtolength{\tabcolsep}{-2pt}
\centering
\newcolumntype{b}{X}
\newcolumntype{t}{>{\hsize=.3\hsize}X}
\newcolumntype{s}{>{\hsize=.2\hsize}c}
\newcolumntype{m}{>{\hsize=.6\hsize}X}
\begin{tabularx}{\textwidth}{tsbbm}
\thead[X]{Name} & \thead[c]{Typ*} & \thead[X]{Trigger} & \thead[X]{Regeln} & \thead[X]{Feedback} \\
\hline
Move & M & Gerät wurde bewegt (Accelerometerdaten) & \data\ ist ausgewählt &  Animation 1 \\
\hline
Abrupt Stop & M & Das Gerät ist mit etwas hartem zusammengestoßen (Accelerometerdaten) & Accelerometerdaten erfüllen Bump-Anforderungen & Animation 2 \\
\hline
Bump Recognized & S & Bump-Daten an Vermittlungskomponente gesendet und Antwort erhalten & Accelerometerdaten beider Geräte ähnlich genug & Animation 3 \\
\hline
Connect & S & Verbindung zwischen den Geräten wurde hergestellt & Datentransfer \newline ist möglich & Animation 4 \\
\hline
\end{tabularx}
\end{table}
\caption{Atomare Interaktionen für das Bump to Connect Pattern}
\end{figure}
*Typ: (M)anuell, (S)ystem
}

\newcommand{\animations}{
\begin{enumerate}
\item Move-Animation: visualisiert dem Benutzer, dass das physische Bewegen des Geräts eine Funktionalität darstellt (z.B. Ein Objekt auf dem Bildschirm bewegt sich etwas verzögert, als hätte es Masse)
\item Abrupt Stop-Animation: visualisiert dem Benutzer, dass ein Bump auf seinem Gerät erkannt wurde (z.B. Das Objekt bleibt am angestoßenen Rand des Bildschirms)
\item Bump Recognized-Animation: visualisiert dem Benutzer, dass die Bump-Geste richtig erkannt wurde. (z.B. Das Objekt färbt sich grün)
\item Connect-Animation: visualisiert dem Benutzer, dass eine Verbindung hergestellt wurde(z.B. Das Objekt wird zu einem Stecker und bewegt sich in Richtung des anderen Geräts)
\end{enumerate}
}

\newcommand{\designnotes}{
\begin{itemize}
\item[-] Beim Ausführen der Bump-Geste sollten die Geräte direkt aneinandergestoßen werden um eine möglichst gute Erkennung zu gewährleisten. Zudem sollte die Härte des Zusammenstoßes stark genug sein um eine Erkennung zu ermöglichen, jedoch die Geräte nicht beschädigen.
\item[-] Bei jeder Synchronen Connect-Geste muss es eine Vermittlungskomponente geben, an die die relevanten Daten der Geste gesendet werden. Diese vergleicht die empfangenen Daten der beiden involvierten Geräte und gibt positive oder negative Rückmeldung.
\end{itemize}}

% -------------------------------
% WANN
% -------------------------------

\newcommand{\validcontext}{Verbinden von mobilen Geräten zwecks Datenübertragung, Verbinden von mobilen Privatgeräten mit stationären Geräten (z.B. Verbindung zu einem Netzwerk am Arbeitsplatz)}

\newcommand{\simultaneously}{}
%\newcommand{\sequentially}{}

\newcommand{\online}{}
%\newcommand{\offline}{}

\newcommand{\private}{}
\newcommand{\semipublic}{}
\newcommand{\public}{}
\newcommand{\stationary}{}
\newcommand{\onthego}{}

\newcommand{\leanback}{}
\newcommand{\leanforward}{}

\newcommand{\single}{}
\newcommand{\collaboration}{}
\newcommand{\facetoface}{}
\newcommand{\sidetoside}{}
\newcommand{\cornertocorner}{}

\newcommand{\notvalidcontext}{Sichtbarmachen vertraulicher Informationen (z.B. Name, Alter etc.) auf öffentlichen Displays.}


\newcommand{\devicetabular}{
\begin{tabular}[H]{|c|c|c|c|c|c|}
\hline
\diagbox{von}{nach}   & Smartwatch & Smartphone & Tablet & Tabletop & Screens \\
\hline
Smartwatch            &     x      &     x      &   x    &    x     &         \\
\hline
Smartphone            &     x      &     x      &   x    &     x    &        \\
\hline
Tablet                &     x      &     x      &   x    &     x    &
\\
\hline
Tabletop              &            &            &        &          &         \\
\hline
Screens               &            &            &        &          &         \\
\hline
\end{tabular}}

% -------------------------------
% WARUM
% -------------------------------

%\newcommand{\established}{}
\newcommand{\candidate}{}
\newcommand{\realizable}{}
%\newcommand{\futuristic}{}

\newcommand{\otherpatterns}{
\begin{itemize}
\item Bump To Give
\item Bump To Take
\item Bump To Exchange
\item Nudge
\end{itemize}
}

\newcommand{\stateoftheart}{
\begin{enumerate}
\item Bump App: Bis 2014 in den App/Play Stores erhältlich gewesen [\url{http://bu.mp/}]
\item Beispiel-Implementierung eines Bump Patterns \citep{Grab2015}.
\item Hinckley, K. \citep{Hinckley2003}
%\item Microinteractions im Multi-Screen Kontext \citep{Madden2016}.
\end{enumerate}
}

\newcommand{\designprinciples}{}

\newcommand{\imageschemata}{}
%\newcommand{\imageSchemaVoid}{}
%\newcommand{\imageSchemaObject}{}
%\newcommand{\imageSchemaSubstance}{}
%\newcommand{\imageSchemaCenterPeriphery}{}
\newcommand{\imageSchemaContact}{}
%\newcommand{\imageSchemaFrontBack}{}
%\newcommand{\imageSchemaLocation}{}
%\newcommand{\imageSchemaNearFar}{}
%\newcommand{\imageSchemaPath}{}
%\newcommand{\imageSchemaSourcePathGoal}{}
%\newcommand{\imageSchemaScale}{}
%\newcommand{\imageSchemaLeftRight}{}
%\newcommand{\imageSchemaContainer}{}
%\newcommand{\imageSchemaContent}{}
%\newcommand{\imageSchemaFullEmpty}{}
%\newcommand{\imageSchemaInOut}{}
%\newcommand{\imageSchemaSurface}{}
%\newcommand{\imageSchemaMerging}{}
%\newcommand{\imageSchemaSplitting}{}
\newcommand{\imageSchemaMomentum}{}
%\newcommand{\imageSchemaSelfMotion}{}
%\newcommand{\imageSchemaBigSmall}{}
%\newcommand{\imageSchemaFastSlow}{}
%\newcommand{\imageSchemaPartWhole}{}

\newcommand{\realworld}{}
\newcommand{\realworldNaivePhysic}{}
\newcommand{\realworldBodyAwareness}{}
\newcommand{\realworldEnvironmentAwareness}{}
\newcommand{\realworldSocialAwareness}{}

\newcommand{\metaphor}{}
\newcommand{\metaphordesc}{Begrüßung per "Fistbump", Anstoßen (wie mit Getränken)}

% -------------------------------
% TECHNISCHES
% -------------------------------

\newcommand{\requiredTechnologies}{
Um Bump To Connect auf einem Gerät (\textit{Device}) ausführen zu können, gibt es einige Voraussetzungen und Einschränkungen bezüglich der verfügbaren Technologien auf diesem Gerät. Ein Gerät ist dann verwendbar, wenn es folgende Eigenschaften aufweist (s. Abbildung \ref{bump_hardware}):
\begin{itemize}
\item \textbf{Input}: Unbedingte Voraussetzung für die Erkennung von Bump-Gesten ist die Möglichkeit, die Beschleunigung eines Gerätes messen zu können. Dazu wird in mobilen Geräten zumeist ein Beschleunigungssensor (Accelerometer) verbaut, der auf Änderungen in der Geschwindigkeit reagiert und diese Werte Applikationen zur Verfügung stellt.
\item \textbf{Output}: Je nachdem, welches Feedback dem User gegeben werden soll, sind visueller Output (Bildschirm) sowie Vibration und Sound denkbar, um erkannte Geräte und aufgebaute Verbindungen zu signalisieren.
\item \textbf{Connectivity}: Ziel der Bump To Connect Geste ist das Aufbauen einer Verbindung zwischen zwei Geräten. Da die Geräte sich vorher nicht kennen, aber ein Protokoll für die Erkennung der synchronen Geste notwendig ist, ist ein Infrastruktur-Komponente (z.B. Message-Queue-Server, Webservice o.Ä.) zur Vermittlung zwischen den Geräten notwendig. Der anschließende Verbindungsaufbau zwischen den Geräten erfolgt über ein Ad-Hoc-Netzwerk wie Bluetooth oder WiFi Direct.
\end{itemize}

\begin{figure}[h]
\includegraphics[width=\textwidth]{bump_hardware.png}
\caption{Benötigte Technologien für das Bump To Connect Pattern}
\label{bump_hardware}
\end{figure}
}

\newcommand{\implementation}{
\subsubsection*{Erkennung synchroner Gesten}
Bei der Geste Bump To Connect handelt es sich um eine \textit{synchrone Geste}, deren Erkennung nur auf einem Gerät durchgeführt werden muss. Der allgemeine Ablauf entfällt in zwei Teile (s. Abbildung \ref{gesture_detection}):
\begin{itemize}
\item Erkennen der Geste (\textit{Gesture Detection}) und
\item Überprüfen eventueller Bedingungen an die Geste (\textit{Constraint Check}).
\end{itemize}

\begin{figure}[h]
\includegraphics[width=\textwidth]{synchronous_gesture_detection.png}
\caption{Allgemeiner Ablauf einer Gestenerkennung}
\label{gesture_detection}
\end{figure}
Wurde die Geste erkannt, wird ein entsprechendes \textit{GestureEvent} generiert, das an den \textit{Constraint Check} übergeben wird.

\subsubsection*{Bump Erkennung}
Zum Erkennen der Geste wird \textit{Proximity}-Hardware vorausgesetzt, die \textit{Ranging} ermöglicht, also eine kontinuierliche Suche nach Geräten in der Umgebung. Gefundene Geräte sollten sich mit einer \textit{Service-UUID} o.Ä. identifizieren, anhand derer sie als mögliche Verbindungspartner identifiziert werden können. Daraus ergeben sich folgende Events:
\begin{itemize}
\item \textbf{DEVICE\_FOUND}: Beim Ranging wurde ein entferntes Gerät gefunden.
\item \textbf{MATCH}: Ein gefundenes Gerät besitzt die korrekte Service-UUID.
\item \textbf{NO\_MATCH}: Ein gefundenes Gerät besitzt eine ungültige Service-UUID.
\item \textbf{STOP\_RANGING}: Das Ranging wurde beendet, es werden keine weiteren. 
\end{itemize}

Basierend auf diesen Events ergibt sich die Implementierung der Approach-Erkennung entsprechend Abbildung \ref{recognize_approach}. Ein Approach wird dann erkannt, wenn ein beim Ranging gefundenes Gerät die erwartete Service-UUID besitzt. Danach kann entweder nach weiteren Geräten gesucht oder die Suche beendet werden. Besitzt ein gefundenes Gerät keine gültige Service-UUID, wird so lange weiter gesucht, bis entweder ein möglicher Verbindungspartner gefunden wurde oder ein Abbruch des Ranging signalisiert wird. Wurde ein Approach erkannt, wird ein \textit{ProximityEvent} generiert, das für die Überprüfung der \textit{Constraints} im nächsten Schritt benötigt wird.

\begin{figure}[h]
\includegraphics[width=\textwidth]{approach_recognize.png}
\caption{Erkennung der Approach Geste}
\label{recognize_approach}
\end{figure}

\subsubsection*{Bump Constraint Check}
Um einzuschränken, unter welchen Bedingungen eine Annäherung als Approach To Connect gewertet werden soll, wird das im vorigen Schritt generierte \textit{ProximityEvent} mit vorher gesetzten \textit{Constraint} verglichen. Abbildung \ref{check_approach_constraints} zeigt beispielhaft den Ablauf des \textit{Constraint Checks}. Es werden zwei Constraints überprüft:
\begin{itemize}
\item Ein Integer, die sog. Major-Nummer und
\item die Entfernung (\textit{Proximity}) zum erkannten Gerät.
\end{itemize}
Der erste Constraint ist angelehnt an das iBeacon-Protokoll, in dem neben einer Service-UUID (s. voriges Kapitel) zur eindeutigen Identifikation von Geräten eine Major- und Minor-Nummer gesendet werden können. Dadurch kann der Kreis möglicher Verbindungspartner weiter eingeschränkt werden. 
Im nächsten Schritt wird die gemessene Entfernung mit einem Vorgabewert verglichen. Die vier Bereiche \textit{immediate}, \textit{near}, \textit{far} und \textit{unknown} sind angelehnt an \cite{Marquardt2015} und können auch durch konkrete Entfernungswerte ersetzt werden.\\

Entsprechend dem Lebenszyklus einer Multiscreen-Applikation besteht nach erfolgreich
ausgeführtem Approach To Connect eine Verbindung zum \recdev{}, was die Voraussetzung für Transfer-Gesten ist.
Weitergehende Informationen zum Applikations-Lebenszyklus und den weiteren
Gestaltungsmöglichkeiten für den \textit{Connect}, \textit{Feedbacks} etc. finden sich
auf der \developerpage.

\begin{figure}[h]
\includegraphics[width=\textwidth]{approach_check_constraints.png}
\caption{Überprüfung der Constraints für die Approach Geste}
\label{check_approach_constraints}
\end{figure}
}

% -------------------------------
% SONSTIGES
% -------------------------------

\newcommand{\authors}{
Benjamin Grab, Hochschule Mannheim\\
Valentina Burjan, Hochschule Mannheim\\
Dominick Madden, Hochschule Mannheim\\
Horst Schneider, Hochschule Mannheim}

\newcommand{\versionhistory}{30.08.2016}
\newcommand{\dateofcreation}{20.09.2015}
\newcommand{\comments}{...}
\newcommand{\questions}{...}

% template inkludieren --------------

\input{template}
